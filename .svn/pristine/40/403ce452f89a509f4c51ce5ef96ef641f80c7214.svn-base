<div class="inmodal">
	<div class="modal-header">
		<h4 class="modal-title">新建商户</h4>
		<button type="button" class="close" data-dismiss="modal"
			ng-click="cancel()">
			<span aria-hidden="true">×</span> <span class="sr-only">Close</span>
		</button>
	</div>
	<div class="modal-body ofy-visible">
		<form role="form" class="form-horizontal" novalidate name="spFrm">
			<div class="form-group">
				<label class="col-sm-2 control-label required">商户名称:</label>
				<div class="col-sm-8">
				<div class="control-content">
                   <input type="text" class="form-control" name="spName" ng-required="true" ng-change="changeSpName()"  ng-model="sp.spName" maxlength=30>
                   <div class="m-t-xs"
							ng-show="spFrm.spName.$invalid && spFrm.submitted">
						<small class="text-danger"
							ng-show="spFrm.spName.$error.required">请输入商户名称!</small>
						<!-- <small class="text-danger" 
							ng-show="spFrm.spName.$error.vAsync">商户名称已存在1!</small> -->
					</div>
					<div class="m-t-xs" ng-if="spNameExisted">
						<small class="text-danger" >商户名称已存在!</small>
					</div>	
				</div>
                </div>
			</div>
			<div class="form-group">
				<label class="col-sm-2 control-label required">级别:</label>
				<div class="col-sm-4">
                    <ui-select ng-model="sp.level" ng-change="changeLevel()" name="level" theme="bootstrap" >
                        <ui-select-match placeholder="一级">{{$select.selected.text}}</ui-select-match>
                        <ui-select-choices repeat="item in levelList">
                            <div ng-bind=" item.text "></div>
                        </ui-select-choices>
                    </ui-select>
                </div>
                <div ng-if="spNameByLevel">
                <label class="col-sm-2 control-label required">隶属服务商:</label>
				<div class="col-sm-4">
                    <ui-select ng-model="sp.parentSpCode" ng-required="true" name="parentSpCode" theme="bootstrap" >
                        <ui-select-match placeholder="请选择">{{$select.selected.text}}</ui-select-match>
                        <ui-select-choices repeat="item in serviceList">
                            <div ng-bind=" item.text "></div>
                        </ui-select-choices>
                    </ui-select>
                     <div class="m-t-xs"
							ng-show="spFrm.parentSpCode.$invalid && spFrm.submitted">
						<small class="text-danger"
							ng-show="spFrm.parentSpCode.$error.required">请选择隶属商户名称!</small>
					</div>
                </div>
                </div>
			</div>
			<div class="form-group">
				<label class="col-lg-2 control-label required">联系人</label> 
				<div class="col-sm-8">
                   <input type="text" class="form-control" name="contactperson" ng-required="true" ng-model="sp.contactperson"  maxlength=20>
                   <div class="m-t-xs"
							ng-show="spFrm.contactperson.$invalid && spFrm.submitted">
						<small class="text-danger"
							ng-show="spFrm.contactperson.$error.required">请输入联系人!</small>
				   </div>
                </div>
            </div>
            <div class="form-group">
				<label class="col-lg-2 control-label required">联系电话</label> 
				<div class="col-sm-8">
                   <input type="text" class="form-control" name="contactphone" ng-required="true" ng-pattern="/^1[3|4|5|8][0-9]\d{8}$/" ng-model="sp.contactphone"  maxlength=11>
                   <div class="m-t-xs"
							ng-show="spFrm.contactphone.$invalid && spFrm.submitted">
						<small class="text-danger"
							ng-show="spFrm.contactphone.$error.required">请输入联系电话!</small>
						<small class="text-danger"
							ng-show="spFrm.contactphone.$error.pattern">请输入有效的联系电话!</small>
				   </div>
                </div>
            </div>
            <div class="form-group">
				<label class="col-sm-2 control-label required">联系地址:</label>
				<div class="col-sm-4">
                    <ui-select ng-model="sp.province" ng-required="true" ng-change="changeProvince()" name="province" theme="bootstrap" >
                        <ui-select-match placeholder="省份">{{$select.selected.text}}</ui-select-match>
                        <ui-select-choices repeat="item in provinceList">
                            <div ng-bind=" item.text "></div>
                        </ui-select-choices>
                    </ui-select>
                    <div class="m-t-xs"
							ng-show="spFrm.province.$invalid && spFrm.submitted">
						<small class="text-danger"
							ng-show="spFrm.province.$error.required">请选择省!</small>
				   </div>
                </div>
				<div class="col-sm-4">
                    <ui-select ng-model="sp.city" ng-required="true" name="city" theme="bootstrap" >
                        <ui-select-match placeholder="城市">{{$select.selected.text}}</ui-select-match>
                        <ui-select-choices repeat="item in cityList">
                            <div ng-bind=" item.text "></div>
                        </ui-select-choices>
                    </ui-select>
                    <div class="m-t-xs"
							ng-show="spFrm.city.$invalid && spFrm.submitted">
						<small class="text-danger"
							ng-show="spFrm.city.$error.required">请选择市!</small>
				   </div>
                </div>
                <div class="col-sm-8 col-sm-push-2 m-t">
                   <input type="text" class="form-control" placeholder="详细地址" name="otherAddr" ng-required="true" ng-model="sp.otherAddr"  maxlength=50>
                   <div class="m-t-xs"
							ng-show="spFrm.otherAddr.$invalid && spFrm.submitted">
						<small class="text-danger"
							ng-show="spFrm.otherAddr.$error.required">请填写详细地址!</small>
				   </div>
                </div>
			</div>
		</form>
	</div>
	<div class="modal-footer">
		<button type="submit" class="btn btn-primary" ng-click="submitSp();">提交</button>
		<button type="button" class="btn btn-white" ng-click="cancel();">取消</button>
	</div>
</div>
